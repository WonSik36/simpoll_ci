(this.webpackJsonpsimpoll_dashboard=this.webpackJsonpsimpoll_dashboard||[]).push([[0],{102:function(e,t,a){},103:function(e,t,a){},106:function(e,t,a){},201:function(e,t,a){},202:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(23),o=a.n(s),l=(a(102),a(7)),r=a(8),c=a(10),p=a(9),u=a(4),m=a(11),h=a(206),d=a(207),b=a(90),f=a(216),E=(a(103),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.user!==this.props.user}},{key:"render",value:function(){return i.a.createElement(f.a,{bg:"primary",variant:"dark"},i.a.createElement(f.a.Brand,{href:this.props.href},this.props.children),i.a.createElement(f.a.Toggle,null),i.a.createElement(f.a.Collapse,{className:"justify-content-end"},i.a.createElement(f.a.Text,null,"Signed in as:",i.a.createElement("p",{className:"nav-user"},this.props.user.nickname))))}}]),t}(i.a.Component)),v=a(217),y=a(204),g=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.data!==this.props.data}},{key:"render",value:function(){return i.a.createElement(v.a,null,i.a.createElement(v.a.Header,null,"\uc54c\ub9bc"),i.a.createElement(v.a.Body,null,i.a.createElement(y.a,{variant:"danger"},i.a.createElement(y.a.Heading,null,"\uacf5\uc9c0"),"\uc54c\ub9bc \uae30\ub2a5\uc740 \ucd94\ud6c4 \uac1c\ubc1c\ub420 \uc608\uc815\uc785\ub2c8\ub2e4\u3160")))}}]),t}(i.a.Component),k=a(87),C=a(205),S=a(214),O=(a(106),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={searchType:"room",placeholder:"room\uc744 \uc785\ub825\ud558\uc138\uc694."},a.onSearchTypeChange=a.onSearchTypeChange.bind(Object(u.a)(a)),a.onSearchSubmit=a.onSearchSubmit.bind(Object(u.a)(a)),a.onAddRoom=a.onAddRoom.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.data!==this.props.data||t!==this.state}},{key:"onSearchTypeChange",value:function(e){this.setState({searchType:e.target.value,placeholder:e.target.value+"\uc744 \uc785\ub825\ud558\uc138\uc694."})}},{key:"onSearchSubmit",value:function(e){e.preventDefault(),this.props.onSubmit(e.currentTarget["search-word"].value,e.currentTarget["search-type"].value)}},{key:"onAddRoom",value:function(e){e.preventDefault(),this.props.addRoom(this.props.data.item.sid)}},{key:"render",value:function(){var e=null;return null!==this.props.data.item.title&&(e="room"===this.state.searchType?i.a.createElement("div",{className:"search-box-content"},i.a.createElement("b",null,this.props.data.item.title),i.a.createElement("br",null),i.a.createElement("b",null,"\ubc29\uc7a5:")," ",this.props.data.item.master_nickname,i.a.createElement("br",null),i.a.createElement("b",null,"\ucc38\uc5ec\uc778\uc6d0:")," ",this.props.data.item.part_num,i.a.createElement("br",null),i.a.createElement(k.a,{onClick:this.onAddRoom},"Room \ucc38\uc5ec")):i.a.createElement("div",{className:"search-box-content"},i.a.createElement("b",null,this.props.data.item.title),i.a.createElement("br",null),i.a.createElement("b",null,"\uac1c\uc124\uc790:")," ",this.props.data.item.user_nickname,i.a.createElement("br",null),i.a.createElement(k.a,{href:"#"},"Simpoll \ucc38\uc5ec"))),this.props.data.isLoading&&(e=i.a.createElement(C.a,{animation:"border",variant:"primary"})),i.a.createElement(v.a,null,i.a.createElement(v.a.Header,null,"\uac80\uc0c9"),i.a.createElement(v.a.Body,null,i.a.createElement(S.a,{onSubmit:this.onSearchSubmit},i.a.createElement(S.a.Control,{required:!0,type:"text",placeholder:this.state.placeholder,name:"search-word"}),i.a.createElement(S.a.Group,{className:"p-1"},i.a.createElement(S.a.Check,{inline:!0,label:"Room",type:"radio",id:"radio-1",name:"search-type",value:"room",onChange:this.onSearchTypeChange,checked:"room"===this.state.searchType}),i.a.createElement(S.a.Check,{inline:!0,label:"Simpoll",type:"radio",id:"radio-2",name:"search-type",value:"simpoll",onChange:this.onSearchTypeChange,checked:"simpoll"===this.state.searchType}),i.a.createElement(k.a,{variant:"primary",type:"submit"},"Search!"))),e))}}]),t}(i.a.Component)),_=a(88),j=a(86),q=a(92),T=a(52),R=(a(63),["#007bff7f","#6c757d7f","#28a7457f","#dc35457f","#ffc1077f","#17a2b87f"]),N=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={open:!1,page:1},a.setOpen=a.setOpen.bind(Object(u.a)(a)),a.disableLeftButton=a.disableLeftButton.bind(Object(u.a)(a)),a.disableRightButton=a.disableRightButton.bind(Object(u.a)(a)),a.onSimpollRefresh=a.onSimpollRefresh.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"setOpen",value:function(e){this.setState({open:e})}},{key:"disableLeftButton",value:function(){return 1===this.state.page}},{key:"disableRightButton",value:function(){return 2===this.state.page}},{key:"onSimpollRefresh",value:function(e){e.preventDefault(),this.props.onSimpollRefresh(this.props.idx)}},{key:"render",value:function(){var e,t=this,a=1;e=this.state.open?i.a.createElement("span",{className:"icon-arrow"},i.a.createElement("i",{className:"fas fa-chevron-up"})):i.a.createElement("span",{className:"icon-arrow"},i.a.createElement("i",{className:"fas fa-chevron-down"}));var n=i.a.createElement("i",{className:"far fa-clock"});this.props.data.voted&&(n=i.a.createElement("i",{className:"far fa-check-circle"}));var s=[];switch(this.state.page){case 1:for(var o=0;o<this.props.data.questions.length;o++){for(var l=[],r=[],c=0;c<this.props.data.questions[o].options.length;c++)l[c]=this.props.data.questions[o].options[c].count,r[c]=this.props.data.questions[o].options[c].option_name;var p={datasets:[{backgroundColor:R,data:l}],labels:r};s.push(i.a.createElement("div",{key:o},i.a.createElement("p",{key:o},this.props.data.questions[o].question_title),i.a.createElement(T.a,{data:p,width:100,height:50})))}break;case 2:s.push(i.a.createElement("p",{key:a++},"\ub0b4 \uc120\ud0dd"));for(var u=0;u<this.props.data.questions.length;u++){var m=[];if("0"===this.props.data.questions[u].question_type)for(var f=0;f<this.props.data.questions[u].options.length;f++){var E=this.props.data.questions[u].options[f].voted;m.push(i.a.createElement(S.a.Check,{inline:!0,key:a++,label:this.props.data.questions[u].options[f].option_name,type:"radio",id:"simpoll-"+this.props.data.questions[u].sid+"-radio-"+(f+1),name:"contents_number"+this.props.data.questions[u].sid,value:f+1,defaultChecked:E,disabled:!0}))}else if("1"===this.props.data.questions[u].question_type)for(var y=0;y<this.props.data.questions[u].options.length;y++){var g=this.props.data.questions[u].options[y].voted;m.push(i.a.createElement(S.a.Check,{inline:!0,key:a++,label:this.props.data.questions[u].options[y].option_name,type:"checkbox",id:"simpoll-"+this.props.data.questions[u].sid+"-checkbox-"+(y+1),name:"contents_number"+this.props.data.questions[u].sid,value:y+1,defaultChecked:g,disabled:!0}))}s.push(i.a.createElement(_.a,{key:a++},i.a.createElement(S.a.Label,{key:a++},this.props.data.questions[u].question_title),i.a.createElement("br",null),m))}}var C=this.disableLeftButton(),O=this.disableRightButton();return i.a.createElement(v.a,null,i.a.createElement(v.a.Header,{className:"p-1"},i.a.createElement(h.a,null,i.a.createElement(d.a,null,i.a.createElement(b.a,{xs:1},i.a.createElement("span",{className:"icon-checked"},n)),i.a.createElement(b.a,{xs:9,className:"p-0"},i.a.createElement(d.a,null,i.a.createElement(b.a,{xs:12},i.a.createElement("b",null,"\uc81c\ubaa9"),": ",this.props.data.title," ",i.a.createElement("b",null,"\uc2ec\ud3f4ID"),": ",this.props.data.simpoll_id," ",i.a.createElement("b",null,"URL"),": ",this.props.data.url_name),i.a.createElement(b.a,{xs:12},i.a.createElement("b",null,"\ub9c8\uac10\uae30\ud55c"),": ",this.props.data.deadline))),i.a.createElement(b.a,{xs:1},i.a.createElement(k.a,{variant:"light",className:"p-0 float-right",onClick:this.onSimpollRefresh},i.a.createElement("span",{className:"icon-refresh"},i.a.createElement("i",{className:"fas fa-redo-alt"})))),i.a.createElement(b.a,{xs:1},i.a.createElement(k.a,{variant:"light",className:"p-0 float-right",onClick:function(){return t.setOpen(!t.state.open)},"aria-controls":"collapse-simpoll-"+this.props.idx,"aria-expanded":this.state.open},e))))),i.a.createElement(v.a.Body,null,i.a.createElement(j.a,{in:this.state.open},i.a.createElement("div",{id:"collapse-simpoll-"+this.props.idx},i.a.createElement(q.a,{className:"float-right"},i.a.createElement(k.a,{variant:"light",disabled:C,onClick:function(){this.setState({page:this.state.page-1})}.bind(this)},i.a.createElement("span",null,i.a.createElement("i",{className:"fas fa-chevron-left"}))),i.a.createElement(k.a,{variant:"light",disabled:O,onClick:function(){this.setState({page:this.state.page+1})}.bind(this)},i.a.createElement("span",null,i.a.createElement("i",{className:"fas fa-chevron-right"})))),s))))}}]),t}(i.a.Component),x=a(209),L=a(208),w=(i.a.Component,function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={open:!1,choice:1,page:1},a.setOpen=a.setOpen.bind(Object(u.a)(a)),a.disableLeftButton=a.disableLeftButton.bind(Object(u.a)(a)),a.disableRightButton=a.disableRightButton.bind(Object(u.a)(a)),a.onSimpollDelete=a.onSimpollDelete.bind(Object(u.a)(a)),a.onSimpollRefresh=a.onSimpollRefresh.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"setOpen",value:function(e){this.setState({open:e})}},{key:"disableLeftButton",value:function(){return 1==this.state.page}},{key:"disableRightButton",value:function(){return 3==this.state.page}},{key:"onSimpollDelete",value:function(e){e.preventDefault(),this.props.onSimpollDelete(this.props.data.sid)}},{key:"onSimpollRefresh",value:function(e){e.preventDefault(),this.props.onSimpollRefresh(this.props.idx,!1,!1)}},{key:"render",value:function(){var e,t=this;e=this.state.open?i.a.createElement("span",{className:"icon-arrow"},i.a.createElement("i",{className:"fas fa-chevron-up"})):i.a.createElement("span",{className:"icon-arrow"},i.a.createElement("i",{className:"fas fa-chevron-down"}));var a=null;this.props.data.isDeadlinePass&&(a=i.a.createElement("span",{className:"icon-checked"},i.a.createElement("i",{className:"far fa-clock"})));var n=[];switch(this.state.page){case 1:for(var s=0;s<this.props.data.questions.length;s++){for(var o=[],l=[],r=0;r<this.props.data.questions[s].options.length;r++)o[r]=this.props.data.questions[s].options[r].count,l[r]=this.props.data.questions[s].options[r].option_name;var c={datasets:[{backgroundColor:R,data:o}],labels:l};n.push(i.a.createElement("div",{key:s},i.a.createElement("p",{key:s},this.props.data.questions[s].question_title),i.a.createElement(T.a,{data:c,width:100,height:50})))}break;case 2:for(var p=1,u=0;u<this.props.data.questions.length;u++){for(var m=[],f=0;f<this.props.data.questions[u].options.length;f++){for(var E="",g=0;g<this.props.data.questions[u].options[f].option_user_nickname.length;g++)E+=this.props.data.questions[u].options[f].option_user_nickname[g],g!==this.props.data.questions[u].options[f].option_user_nickname.length-1&&(E+=", ");m.push(i.a.createElement("tr",{key:p++},i.a.createElement("td",{key:"1"},this.props.data.questions[u].options[f].option_name),i.a.createElement("td",{key:"2"},this.props.data.questions[u].options[f].count," \uba85"),i.a.createElement("td",{key:"3"},E)))}n.push(i.a.createElement("p",{key:p++},this.props.data.questions[u].question_title)),n.push(i.a.createElement(x.a,{striped:!0,bordered:!0,hover:!0,key:p++},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",null,"Question"),i.a.createElement("th",null,"Number"),i.a.createElement("th",null,"Person"))),i.a.createElement("tbody",null,m)))}break;case 3:n=i.a.createElement(i.a.Fragment,null,i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement(y.a,{variant:"danger"},i.a.createElement(y.a.Heading,null,"\uc815\ub9d0\ub85c Simpoll\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"),i.a.createElement("p",null,"\uc0ad\uc81c\uc2dc \ubcf5\uad6c\uac00 \ubd88\uac00\ub2a5\ud569\ub2c8\ub2e4."),i.a.createElement("hr",null),i.a.createElement("div",{className:"d-flex justify-content-end"},i.a.createElement(k.a,{onClick:this.onSimpollDelete,variant:"outline-danger"},"Delete"))))}var C=this.disableLeftButton(),S=this.disableRightButton();return i.a.createElement(v.a,null,i.a.createElement(v.a.Header,{className:"p-1"},i.a.createElement(h.a,null,i.a.createElement(d.a,null,i.a.createElement(b.a,{xs:1},a),i.a.createElement(b.a,{xs:9,className:"p-0"},i.a.createElement(d.a,null,i.a.createElement(b.a,{xs:12},i.a.createElement("b",null,"\uc81c\ubaa9"),": ",this.props.data.title," ",i.a.createElement("b",null,"\uc2ec\ud3f4ID"),": ",this.props.data.sid," ",i.a.createElement("b",null,"URL"),": ",this.props.data.url_name),i.a.createElement(b.a,{xs:12},i.a.createElement("b",null,"\ub9c8\uac10\uae30\ud55c"),": ",this.props.data.deadline))),i.a.createElement(b.a,{xs:1},i.a.createElement(k.a,{variant:"light",className:"p-0 float-right",onClick:this.onSimpollRefresh},i.a.createElement("span",{className:"icon-refresh"},i.a.createElement("i",{className:"fas fa-redo-alt"})))),i.a.createElement(b.a,{xs:1},i.a.createElement(k.a,{variant:"light",className:"p-0 float-right",onClick:function(){return t.setOpen(!t.state.open)},"aria-controls":"collapse-simpoll-"+this.props.idx,"aria-expanded":this.state.open},e))))),i.a.createElement(v.a.Body,null,i.a.createElement(j.a,{in:this.state.open},i.a.createElement("div",{id:"collapse-simpoll-"+this.props.idx},i.a.createElement(q.a,{className:"float-right"},i.a.createElement(k.a,{variant:"light",disabled:C,onClick:function(){this.setState({page:this.state.page-1})}.bind(this)},i.a.createElement("span",null,i.a.createElement("i",{className:"fas fa-chevron-left"}))),i.a.createElement(k.a,{variant:"light",disabled:S,onClick:function(){this.setState({page:this.state.page+1})}.bind(this)},i.a.createElement("span",null,i.a.createElement("i",{className:"fas fa-chevron-right"})))),n))))}}]),t}(i.a.Component)),D=function(e){function t(e){var a;Object(l.a)(this,t),a=Object(c.a)(this,Object(p.a)(t).call(this,e));for(var n=[],i=0;i<a.props.data.questions.length;i++){for(var s=[],o=0;o<a.props.data.questions[i].options.length;o++)s.push(!1);n.push(s)}return a.state={open:!1,choice:n},a.setOpen=a.setOpen.bind(Object(u.a)(a)),a.onChoiceChange=a.onChoiceChange.bind(Object(u.a)(a)),a.onSimpollSubmit=a.onSimpollSubmit.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"setOpen",value:function(e){this.setState({open:e})}},{key:"onChoiceChange",value:function(e){var t=this.state.choice.slice(),a=e.currentTarget.dataset.qidx,n=e.currentTarget.dataset.oidx;if("0"===this.props.data.questions[a].question_type)for(var i=0;i<t[a].length;i++)t[a][i]=i==n;else for(var s=0;s<t[a].length;s++)s==n&&(t[a][s]=!t[a][s]);this.setState({choice:t})}},{key:"onSimpollSubmit",value:function(e){e.preventDefault();for(var t=[],a=0;a<this.state.choice.length;a++)for(var n=0;n<this.state.choice[a].length;n++)this.state.choice[a][n]&&t.push(this.props.data.questions[a].options[n].option_id);this.props.onSimpollSubmit({idx:this.props.idx,data:t})}},{key:"render",value:function(){for(var e,t=this,a=[],n=1,s=0;s<this.props.data.questions.length;s++){var o=[];if("0"===this.props.data.questions[s].question_type)for(var l=0;l<this.props.data.questions[s].options.length;l++)o.push(i.a.createElement(S.a.Check,{inline:!0,key:n++,label:this.props.data.questions[s].options[l].option_name,type:"radio","data-qidx":s,"data-oidx":l,chekced:this.state.choice[s][l].toString(),onChange:this.onChoiceChange,name:"option-"+this.props.data.questions[s].sid,value:this.props.data.questions[s].options[l].option_id}));else if("1"===this.props.data.questions[s].question_type)for(var r=0;r<this.props.data.questions[s].options.length;r++)o.push(i.a.createElement(S.a.Check,{inline:!0,key:n++,label:this.props.data.questions[s].options[r].option_name,type:"checkbox","data-qidx":s,"data-oidx":r,chekced:this.state.choice[s][r].toString(),onChange:this.onChoiceChange,name:"option-"+this.props.data.questions[s].sid,value:this.props.data.questions[s].options[r].option_id}));a.push(i.a.createElement(_.a,{key:s},i.a.createElement(S.a.Label,null,this.props.data.questions[s].question_title),i.a.createElement("br",null),o))}return e=this.state.open?i.a.createElement("span",{className:"icon-arrow"},i.a.createElement("i",{className:"fas fa-chevron-up"})):i.a.createElement("span",{className:"icon-arrow"},i.a.createElement("i",{className:"fas fa-chevron-down"})),i.a.createElement(v.a,null,i.a.createElement(v.a.Header,{className:"p-1"},i.a.createElement(h.a,null,i.a.createElement(d.a,null,i.a.createElement(b.a,{xs:1}),i.a.createElement(b.a,{xs:10,className:"p-0"},i.a.createElement(d.a,null,i.a.createElement(b.a,{xs:12},i.a.createElement("b",null,"\uc81c\ubaa9"),": ",this.props.data.title," ",i.a.createElement("b",null,"\uc2ec\ud3f4ID"),": ",this.props.data.sid," ",i.a.createElement("b",null,"URL"),": ",this.props.data.url_name),i.a.createElement(b.a,{xs:12},i.a.createElement("b",null,"\ub9c8\uac10\uae30\ud55c"),": ",this.props.data.deadline))),i.a.createElement(b.a,{xs:1},i.a.createElement(k.a,{variant:"light",className:"p-0 float-right",onClick:function(){return t.setOpen(!t.state.open)},"aria-controls":"collapse-simpoll-"+this.props.idx,"aria-expanded":this.state.open},e))))),i.a.createElement(v.a.Body,null,i.a.createElement(j.a,{in:this.state.open},i.a.createElement("div",{id:"collapse-simpoll-"+this.props.idx},i.a.createElement(S.a,{onSubmit:this.onSimpollSubmit},a,i.a.createElement("input",{type:"hidden",name:"idx",value:this.props.idx}),i.a.createElement(k.a,{className:"float-right",variant:"success",type:"submit"},"Submit!"))))))}}]),t}(i.a.Component),A=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=[];if(this.props.data.isLoading)e=i.a.createElement(C.a,{animation:"border",variant:"primary"});else{var t=this.props.data.items;if(this.props.isAudience)for(var a=0;a<t.length;a++)t[a].voted||t[a].isDeadlinePass?e.push(i.a.createElement(N,{data:t[a],key:a+1,idx:a,onSimpollRefresh:this.props.onSimpollRefresh})):e.push(i.a.createElement(D,{data:t[a],key:a+1,idx:a,onSimpollSubmit:this.props.onSimpollSubmit}));else for(var n=0;n<t.length;n++)e.push(i.a.createElement(w,{data:t[n],key:n+1,idx:n,onSimpollDelete:this.props.onSimpollDelete,onSimpollRefresh:this.props.onSimpollRefresh}))}return i.a.createElement(i.a.Fragment,null,e)}}]),t}(i.a.Component),M=a(215),B=a(213),U=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={showModal:!1},a.onRoomDelete=a.onRoomDelete.bind(Object(u.a)(a)),a.updateModal=a.updateModal.bind(Object(u.a)(a)),a.closeModal=a.closeModal.bind(Object(u.a)(a)),a.openModal=a.openModal.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"onRoomDelete",value:function(e){e.preventDefault(),this.closeModal(),this.props.onRoomDelete(this.props.data.sid)}},{key:"updateModal",value:function(e){this.setState({showModal:e})}},{key:"closeModal",value:function(){this.updateModal(!1)}},{key:"openModal",value:function(){this.updateModal(!0)}},{key:"render",value:function(){var e=null;return this.props.isAudience||(e=i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{variant:"light",className:"float-right p-0",onClick:this.openModal},i.a.createElement("span",null,i.a.createElement("i",{className:"fas fa-minus"}))),i.a.createElement(B.a,{show:this.state.showModal,onHide:this.closeModal},i.a.createElement(B.a.Header,{closeButton:!0},i.a.createElement(B.a.Title,null,"\uc815\ub9d0\ub85c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")),i.a.createElement(B.a.Body,null,"\ud55c\ubc88 \uc0ad\uc81c\ud558\uba74 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),i.a.createElement(B.a.Footer,null,i.a.createElement(k.a,{variant:"secondary",onClick:this.closeModal},"Close"),i.a.createElement(k.a,{variant:"danger",onClick:this.onRoomDelete},"Delete"))))),i.a.createElement(i.a.Fragment,null,e,i.a.createElement("h5",null,this.props.data.title),i.a.createElement("h6",null,"\ubc29\uc7a5: ",this.props.data.master_nickname),i.a.createElement("h6",null,"\ucc38\uc5ec\uc778\uc6d0: ",this.props.data.part_num,"\uba85"),i.a.createElement("h6",null,"\ubc29 ID: ",this.props.data.sid," URL: ",this.props.data.url_name))}}]),t}(i.a.Component),P=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).onRoomClick=a.onRoomClick.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.data!==this.props.data}},{key:"onRoomClick",value:function(e){e.preventDefault(),this.props.onRoomClick(e.currentTarget.dataset.sid,this.props.isAudience)}},{key:"render",value:function(){var e=[];if(this.props.data.isLoading)e=i.a.createElement(C.a,{animation:"border",variant:"primary"});else for(var t=this.props.data.items,a=0;a<t.length;a++)e.push(i.a.createElement(M.a.Link,{key:a+1,href:"#room-link"+(a+1),onClick:this.onRoomClick,"data-sid":this.props.data.items[a].sid},i.a.createElement(U,{data:this.props.data.items[a],key:a+1,isAudience:this.props.isAudience,onRoomDelete:this.props.onRoomDelete})));return i.a.createElement(M.a,{className:"flex-column",variant:"pills",defaultActiveKey:"#room-link1"},e)}}]),t}(i.a.Component),Q=(a(84),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement(h.a,{className:"main-container"},i.a.createElement(d.a,null,i.a.createElement(b.a,{sm:4},i.a.createElement("h3",null,"Room"),i.a.createElement(P,{data:this.props["room-list-data"],onRoomClick:this.props.onRoomClick,isAudience:!0})),i.a.createElement(b.a,{sm:8},i.a.createElement("h3",null,"Simpoll"),i.a.createElement(A,{data:this.props["simpoll-list-data"],onSimpollSubmit:this.props.onSimpollSubmit,isAudience:!0,onSimpollRefresh:this.props.onSimpollRefresh}))))}}]),t}(i.a.Component)),V=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={show:!1,authType:"0",nameType:"0"},a.handleClose=a.handleClose.bind(Object(u.a)(a)),a.handleShow=a.handleShow.bind(Object(u.a)(a)),a.onChangeVoteCreateAuth=a.onChangeVoteCreateAuth.bind(Object(u.a)(a)),a.onChangeUserNameType=a.onChangeUserNameType.bind(Object(u.a)(a)),a.onRoomCreate=a.onRoomCreate.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"handleClose",value:function(){this.setState({show:!1,authType:"0",nameType:"0"})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"onChangeVoteCreateAuth",value:function(e){this.setState({authType:e.currentTarget.value})}},{key:"onChangeUserNameType",value:function(e){this.setState({nameType:e.currentTarget.value})}},{key:"onRoomCreate",value:function(e){e.preventDefault(),this.handleClose();var t={title:e.currentTarget.title.value,url_name:e.currentTarget.url_name.value,poll_create_auth:e.currentTarget.vote_create_auth.value,user_name_type:e.currentTarget.user_name_type.value};this.props.onRoomCreate(t)}},{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{variant:"light",className:"float-right",onClick:this.handleShow},i.a.createElement("span",null,i.a.createElement("i",{className:"fas fa-plus"}))),i.a.createElement(B.a,{show:this.state.show,onHide:this.handleClose},i.a.createElement(B.a.Header,{closeButton:!0},i.a.createElement(B.a.Title,null,"Make Room")),i.a.createElement(S.a,{onSubmit:this.onRoomCreate},i.a.createElement(B.a.Body,null,i.a.createElement(S.a.Group,null,i.a.createElement(S.a.Label,null,"Room Name"),i.a.createElement(S.a.Control,{name:"title",type:"text",placeholder:"\ubc29 \uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694.",required:!0})),i.a.createElement(S.a.Group,null,i.a.createElement(S.a.Label,null,"URL"),i.a.createElement(S.a.Control,{name:"url_name",type:"text",placeholder:"URL\uc744 \uc785\ub825\ud558\uc138\uc694."})),i.a.createElement(S.a.Group,null,i.a.createElement(S.a.Label,null,"Simpoll \uc0dd\uc131 \uad8c\ud55c"),i.a.createElement(S.a.Check,{type:"radio",name:"vote_create_auth",value:"0",label:"\ubc29\uc7a5\ub9cc",checked:"0"===this.state.authType,onChange:this.onChangeVoteCreateAuth}),i.a.createElement(S.a.Check,{inline:!0,type:"radio",name:"vote_create_auth",value:"1",label:"\ubc29 \ucc38\uc5ec\uc790 \ubaa8\ub450",checked:"1"===this.state.authType,onChange:this.onChangeVoteCreateAuth})),i.a.createElement(S.a.Group,null,i.a.createElement(S.a.Label,null,"\ucc38\uc5ec\uc790 \uc2e4\uba85/\ub2c9\ub124\uc784 \uc5ec\ubd80"),i.a.createElement(S.a.Check,{type:"radio",name:"user_name_type",value:"0",label:"\uc2e4\uba85",checked:"0"===this.state.nameType,onChange:this.onChangeUserNameType}),i.a.createElement(S.a.Check,{inline:!0,type:"radio",name:"user_name_type",value:"1",label:"\ub2c9\ub124\uc784",checked:"1"===this.state.nameType,onChange:this.onChangeUserNameType}))),i.a.createElement(B.a.Footer,null,i.a.createElement(k.a,{variant:"secondary",onClick:this.handleClose},"Close"),i.a.createElement(k.a,{variant:"primary",type:"submit"},"Submit")))))}}]),t}(i.a.Component),I=a(210),H=a(89),G=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={show:!1,anonymousType:"0",anonymousDisable:!1,partAuthType:"0",questions:[{title:"",choice_no:2,question_type:"0",options:["",""]}]},a.handleClose=a.handleClose.bind(Object(u.a)(a)),a.handleShow=a.handleShow.bind(Object(u.a)(a)),a.onChangeAnonymousType=a.onChangeAnonymousType.bind(Object(u.a)(a)),a.onChangePartAuthType=a.onChangePartAuthType.bind(Object(u.a)(a)),a.addOptions=a.addOptions.bind(Object(u.a)(a)),a.deleteOptions=a.deleteOptions.bind(Object(u.a)(a)),a.addQuestions=a.addQuestions.bind(Object(u.a)(a)),a.deleteQuestions=a.deleteQuestions.bind(Object(u.a)(a)),a.onSimpollCreate=a.onSimpollCreate.bind(Object(u.a)(a)),a.onOptionChange=a.onOptionChange.bind(Object(u.a)(a)),a.onQuestionTitleChange=a.onQuestionTitleChange.bind(Object(u.a)(a)),a.onQuestionTypeChange=a.onQuestionTypeChange.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"handleClose",value:function(){this.setState({show:!1,anonymousType:"0",anonymousDisable:!1,partAuthType:"0",questions:[{title:"",choice_no:2,question_type:"0",options:["",""]}]})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"onChangeAnonymousType",value:function(e){"0"===this.state.anonymousType?this.setState({anonymousType:"1"}):this.setState({anonymousType:"0"})}},{key:"onChangePartAuthType",value:function(e){"1"===e.currentTarget.value?this.setState({partAuthType:e.currentTarget.value,anonymousType:"1",anonymousDisable:!0}):this.setState({partAuthType:e.currentTarget.value,anonymousDisable:!1})}},{key:"addOptions",value:function(e){e.preventDefault();var t=e.currentTarget.dataset.qidx,a=this.state.questions[t].options;a[a.length]="",this.state.questions[t].choice_no++,this.setState({questions:this.state.questions})}},{key:"deleteOptions",value:function(e){e.preventDefault();var t=e.currentTarget.dataset.qidx,a=e.currentTarget.dataset.oidx;this.state.questions[t].options.splice(a,1),this.state.questions[t].choice_no--,this.setState({questions:this.state.questions})}},{key:"addQuestions",value:function(e){e.preventDefault();var t=this.state.questions.slice();t[t.length]={title:"",choice_no:2,question_type:"0",options:["",""]},this.setState({questions:t})}},{key:"deleteQuestions",value:function(e){e.preventDefault(),this.state.questions.splice(e.currentTarget.dataset.qidx,1),this.setState({questions:this.state.questions})}},{key:"onOptionChange",value:function(e){var t=e.currentTarget.dataset.qidx,a=e.currentTarget.dataset.oidx;this.state.questions[t].options[a]=e.currentTarget.value,this.setState({questions:this.state.questions})}},{key:"onQuestionTitleChange",value:function(e){var t=e.currentTarget.dataset.qidx,a=e.currentTarget.value;this.state.questions[t].title=a,this.setState({questions:this.state.questions})}},{key:"onQuestionTypeChange",value:function(e){var t=e.currentTarget.dataset.qidx;e.currentTarget.checked?this.state.questions[t].question_type="1":this.state.questions[t].question_type="0",this.setState({questions:this.state.questions})}},{key:"onSimpollCreate",value:function(e){e.preventDefault(),this.handleClose();var t=e.currentTarget.simpolll_end_date.value+" "+e.currentTarget.simpolll_end_time.value,a="0";e.currentTarget.comment_check.checked&&(a="1");var n="0";e.currentTarget.anonymous_check.checked&&(n="1");var i={title:e.currentTarget.title.value,url_name:e.currentTarget.url_name.value,room_id:this.props.currentRoomId,deadline:t,is_anonymous:n,is_comment_enable:a,part_auth:e.currentTarget.part_auth.value,questions:this.state.questions.slice()};this.props.onSimpollCreate(i)}},{key:"render",value:function(){for(var e=[],t=0;t<this.state.questions.length;t++){for(var a=[],n=0;n<this.state.questions[t].options.length;n++)a.push(i.a.createElement(I.a,{className:"mb-3",key:n+1},i.a.createElement(H.a,{name:"choices",value:this.state.questions[t].options[n],onChange:this.onOptionChange,"data-oidx":n,"data-qidx":t,required:!0}),i.a.createElement(I.a.Append,null,i.a.createElement(k.a,{variant:"danger","data-oidx":n,"data-qidx":t,onClick:this.deleteOptions},i.a.createElement("span",null,i.a.createElement("i",{className:"fas fa-minus"}))))));e.push(i.a.createElement(_.a,{key:t},i.a.createElement(S.a.Label,null,"\ubb38\ud56d \ub0b4\uc6a9"),i.a.createElement(S.a.Control,{type:"text","data-qidx":t,placeholder:"\ubb38\ud56d \ub0b4\uc6a9\uc744 \uc785\ub825\ud558\uc138\uc694.",value:this.state.questions[t].title,onChange:this.onQuestionTitleChange,required:!0}),i.a.createElement(S.a.Label,null,"\uc120\ud0dd\uc9c0"),i.a.createElement(k.a,{variant:"success",onClick:this.addOptions,"data-qidx":t},i.a.createElement("i",{className:"fas fa-plus"})),a,i.a.createElement("br",null),i.a.createElement(S.a.Check,{inline:!0,type:"checkbox",name:"simpolll_type",value:this.state.questions[t].question_type,onChange:this.onQuestionTypeChange,"data-qidx":t,label:"\ubcf5\uc218 \uc120\ud0dd \uc5ec\ubd80"}),i.a.createElement(k.a,{variant:"danger",onClick:this.deleteQuestions,"data-qidx":t},"\ubb38\ud56d \uc0ad\uc81c")))}return i.a.createElement(i.a.Fragment,null,i.a.createElement(k.a,{variant:"light",className:"float-right",onClick:this.handleShow},i.a.createElement("span",null,i.a.createElement("i",{className:"fas fa-plus"}))),i.a.createElement(B.a,{show:this.state.show,onHide:this.handleClose},i.a.createElement(B.a.Header,{closeButton:!0},i.a.createElement(B.a.Title,null,"Make Simpoll")),i.a.createElement(S.a,{onSubmit:this.onSimpollCreate},i.a.createElement(B.a.Body,null,i.a.createElement(S.a.Group,null,i.a.createElement(S.a.Label,null,"Simpoll Name"),i.a.createElement(S.a.Control,{name:"title",type:"text",placeholder:"\uc2ec\ud3f4 \uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694.",required:!0})),i.a.createElement(S.a.Group,null,i.a.createElement(S.a.Label,null,"URL"),i.a.createElement(S.a.Control,{name:"url_name",type:"text",placeholder:"URL\uc744 \uc785\ub825\ud558\uc138\uc694."})),i.a.createElement(S.a.Group,null,i.a.createElement(S.a.Label,null,"\ubb38\ud56d"),i.a.createElement(k.a,{onClick:this.addQuestions},i.a.createElement("i",{className:"fas fa-plus"})),e),i.a.createElement(S.a.Group,null,i.a.createElement(S.a.Check,{inline:!0,type:"checkbox",name:"comment_check",value:"1",label:"Comment \uc0dd\uc131 \uc5ec\ubd80"}),i.a.createElement(S.a.Check,{inline:!0,type:"checkbox",name:"anonymous_check",value:"1",checked:"1"===this.state.anonymousType,onChange:this.onChangeAnonymousType,disabled:this.state.anonymousDisable,label:"\uc775\uba85 \ud22c\ud45c \uc5ec\ubd80"})),i.a.createElement(S.a.Group,null,i.a.createElement(S.a.Label,null,"\ucc38\uc5ec \uad8c\ud55c"),i.a.createElement(S.a.Check,{inline:!0,type:"radio",name:"part_auth",value:"0",label:"\ub85c\uadf8\uc778 \ud55c \ub204\uad6c\ub098",checked:"0"===this.state.partAuthType,onChange:this.onChangePartAuthType}),i.a.createElement(S.a.Check,{inline:!0,type:"radio",name:"part_auth",value:"1",label:"\ub9c1\ud06c\ub97c \uac00\uc9c4 \ub204\uad6c\ub098",checked:"1"===this.state.partAuthType,onChange:this.onChangePartAuthType})),i.a.createElement(S.a.Group,null,i.a.createElement(S.a.Label,null,"\ub9c8\uac10 \uae30\ud55c"),i.a.createElement("input",{type:"date",name:"simpolll_end_date",required:!0}),i.a.createElement("input",{type:"time",name:"simpolll_end_time",required:!0}))),i.a.createElement(B.a.Footer,null,i.a.createElement(k.a,{variant:"secondary",onClick:this.handleClose},"Close"),i.a.createElement(k.a,{variant:"primary",type:"submit"},"Submit")))))}}]),t}(i.a.Component),F=function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return i.a.createElement(h.a,{className:"main-container"},i.a.createElement(d.a,null,i.a.createElement(b.a,{sm:4},i.a.createElement("div",{className:"m-2"},i.a.createElement("h3",{className:"inline"},"Room"),i.a.createElement(V,{onRoomCreate:this.props.onRoomCreate})),i.a.createElement(P,{data:this.props["room-list-data"],onRoomClick:this.props.onRoomClick,isAudience:!1,onRoomDelete:this.props.onRoomDelete})),i.a.createElement(b.a,{sm:8},i.a.createElement("div",{className:"m-2"},i.a.createElement("h3",{className:"inline"},"Simpoll"),i.a.createElement(G,{onSimpollCreate:this.props.onSimpollCreate,currentRoomId:this.props.currentRoomId})),i.a.createElement(A,{data:this.props["simpoll-list-data"],onSimpollSubmit:this.props.onSimpollSubmit,isAudience:!1,onSimpollDelete:this.props.onSimpollDelete,onSimpollRefresh:this.props.onSimpollRefresh}))))}}]),t}(i.a.Component),J=a(211),W=a(212),K=a(96),$=(a(201),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).onViewModeChange=a.onViewModeChange.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"onViewModeChange",value:function(e){e.preventDefault(),"audience"===e.currentTarget.dataset.persontype?this.props.onViewModeChange(!0):this.props.onViewModeChange(!1)}},{key:"render",value:function(){var e,t;return"audience"===this.props.viewmode?(e="primary",t="light"):(e="light",t="primary"),i.a.createElement(J.a,null,i.a.createElement(W.a,{type:"radio",name:"options"},i.a.createElement(K.a,{className:"button",variant:e,"data-persontype":"audience",onClick:this.onViewModeChange},"\ucc38\uc5ec\uc911\uc778 Simpoll"),i.a.createElement(K.a,{className:"button",variant:t,"data-persontype":"speaker",onClick:this.onViewModeChange},"\uac1c\uc124\ud55c Simpoll")))}}]),t}(i.a.Component)),z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(p.a)(t).call(this,e))).state={viewmode:"audience",currentRoomId:null,user:{email:null,name:null,nickname:null},searchResult:{isLoading:!1,item:{title:null,cur_name:null}},roomList:{isLoading:!1,items:[]},simpollList:{isLoading:!1,items:[]},alertList:{isLoading:!1,items:[]}},a.fetchTemplate=a.fetchTemplate.bind(Object(u.a)(a)),a.getUserInfo=a.getUserInfo.bind(Object(u.a)(a)),a.getRoomList=a.getRoomList.bind(Object(u.a)(a)),a.changeViewMode=a.changeViewMode.bind(Object(u.a)(a)),a.search=a.search.bind(Object(u.a)(a)),a.getSimpollList=a.getSimpollList.bind(Object(u.a)(a)),a.getSimpoll=a.getSimpoll.bind(Object(u.a)(a)),a.submitSimpoll=a.submitSimpoll.bind(Object(u.a)(a)),a.createSimpoll=a.createSimpoll.bind(Object(u.a)(a)),a.createRoom=a.createRoom.bind(Object(u.a)(a)),a.deleteSimpoll=a.deleteSimpoll.bind(Object(u.a)(a)),a.deleteRoom=a.deleteRoom.bind(Object(u.a)(a)),a.participateRoom=a.participateRoom.bind(Object(u.a)(a)),a.parseSimpollList=a.parseSimpollList.bind(Object(u.a)(a)),a.parseSimpoll=a.parseSimpoll.bind(Object(u.a)(a)),a.parseQuestion=a.parseQuestion.bind(Object(u.a)(a)),a.checkUserVoted=a.checkUserVoted.bind(Object(u.a)(a)),a.checkDeadlinePassed=a.checkDeadlinePassed.bind(Object(u.a)(a)),a.sortSimpollList=a.sortSimpollList.bind(Object(u.a)(a)),a}return Object(m.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.getUserInfo()}},{key:"fetchTemplate",value:function(e,t,a,n){var i;null!==a&&(i=this.state,this.setState(a)),fetch(e,t).then((function(e){return e.json()})).then((function(e){return new Promise((function(t,a){"success"==e.result?t(e.data):a(new Error(e.message))}))})).then((function(e){n(e)})).catch(function(e){alert(e.message),null!==a&&this.setState(i)}.bind(this))}},{key:"getUserInfo",value:function(){this.fetchTemplate("/index.php/api/user",null,null,function(e){this.setState({user:e}),this.getRoomList(!0)}.bind(this))}},{key:"getRoomList",value:function(e){var t;t=e?"/index.php/api/user/"+this.state.user.sid+"/room?persontype=audience":"/index.php/api/user/"+this.state.user.sid+"/room?persontype=speacker";var a=Object.assign({},this.state.roomList,{isLoading:!0});this.fetchTemplate(t,null,{roomList:a},function(e){this.setState({roomList:{isLoading:!1,items:e},simpollList:{isLoading:!1,items:[]}}),e.length>0&&this.getSimpollList(e[0].sid)}.bind(this))}},{key:"changeViewMode",value:function(e){e?this.setState({viewmode:"audience"}):this.setState({viewmode:"speaker"}),this.getRoomList(e)}},{key:"search",value:function(e,t){var a="/index.php/api/";a+="room"==t?"room/":"simpoll/",a+=e,isNaN(e)?a+="?type=url":a+="?type=id",this.fetchTemplate(a,null,{searchResult:{isLoading:!0,item:{}}},function(e){this.setState({searchResult:{isLoading:!1,item:e}})}.bind(this))}},{key:"getSimpollList",value:function(e){this.setState({currentRoomId:e});var t="/index.php/api/room/"+e+"/simpoll";this.fetchTemplate(t,null,{simpollList:{isLoading:!0,items:[]}},function(e){e.length>0?(e=this.parseSimpollList(e),e=this.sortSimpollList(e),this.setState({simpollList:{isLoading:!1,items:e}})):this.setState({simpollList:{isLoading:!1,items:[]}})}.bind(this))}},{key:"getSimpoll",value:function(e){var t="/index.php/api/simpoll/"+this.state.simpollList.items[e].sid;this.fetchTemplate(t,null,null,function(t){t=this.parseSimpoll(t),this.state.simpollList.items[e]=t;var a=this.sortSimpollList(this.state.simpollList.items);this.setState({simpollList:{isLoading:!1,items:a}})}.bind(this))}},{key:"submitSimpoll",value:function(e){var t=e.idx,a={option_id:e.data},n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)};this.fetchTemplate("/index.php/api/option",n,null,function(e){this.getSimpoll(t)}.bind(this))}},{key:"createSimpoll",value:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};this.fetchTemplate("/index.php/api/simpoll",t,null,function(e){this.getSimpollList(this.state.currentRoomId)}.bind(this))}},{key:"createRoom",value:function(e){e.master=this.state.user.sid,e.master_nickname=this.state.user.nickname;var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};this.fetchTemplate("/index.php/api/room",t,null,function(e){this.getRoomList(!1)}.bind(this))}},{key:"deleteSimpoll",value:function(e){this.fetchTemplate("/index.php/api/simpoll/"+e,{method:"DELETE"},null,function(e){this.getSimpollList(this.state.currentRoomId)}.bind(this))}},{key:"deleteRoom",value:function(e){this.fetchTemplate("/index.php/api/room/"+e,{method:"DELETE"},null,function(e){this.getRoomList(!1)}.bind(this))}},{key:"participateRoom",value:function(e){var t="/index.php/api/room/"+e+"/user",a={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:this.state.user.sid})};this.fetchTemplate(t,a,null,function(e){this.changeViewMode(!0)}.bind(this))}},{key:"parseSimpollList",value:function(e){e.sort((function(e,t){var a=Number(e.simpoll_id),n=Number(t.simpoll_id);return a>=n?-1:a<n?1:void 0}));var t=[],a=0,n=0,i=e[0].simpoll_id;for(n=0;n<e.length;n++){if(i!=e[n].simpoll_id){var s=e.slice(a,n),o=this.parseSimpoll(s);t.push(o),a=n}i=e[n].simpoll_id}var l=e.slice(a,n),r=this.parseSimpoll(l);return t.push(r),t}},{key:"parseSimpoll",value:function(e){this.checkDeadlinePassed(e);var t={sid:e[0].simpoll_id,room_id:e[0].room_id,title:e[0].simpoll_title,url_name:e[0].url_name,user_id:e[0].user_id,user_nickname:e[0].user_nickname,deadline:e[0].deadline,is_comment_enable:e[0].is_comment_enable,is_anonymous:e[0].is_anonymous,part_auth:e[0].part_auth,create_date:e[0].create_date,isDeadlinePass:e[0].isDeadlinePass,questions:[]};if("audience"===this.state.viewmode){var a=this.checkUserVoted(e);t.voted=a}e.sort((function(e,t){var a=Number(e.qustion_id),n=Number(t.qustion_id);return a<n?-1:a>n?1:Number(e.option_id)<Number(t.option_id)?-1:1}));var n=0,i=0,s=e[0].question_id;for(i=0;i<e.length;i++){if(s!=e[i].question_id){var o=e.slice(n,i),l=this.parseQuestion(o);t.questions.push(l),n=i}s=e[i].question_id}var r=e.slice(n,i),c=this.parseQuestion(r);return t.questions.push(c),t}},{key:"parseQuestion",value:function(e){for(var t={sid:e[0].question_id,question_title:e[0].question_title,choice_no:e[0].choice_no,question_type:e[0].question_type,options:[]},a=0;a<e.length;a++){var n={option_name:e[a].option_name,option_id:e[a].option_id,option_user_id:e[a].option_user_id.split("|"),option_user_nickname:e[a].option_user_nickname.split("|"),count:e[a].option_count};if("audience"===this.state.viewmode){n.voted=!1;for(var i=0;i<n.option_user_id.length;i++)n.option_user_id[i]===this.state.user.sid&&(n.voted=!0)}t.options.push(n)}return t.options.sort((function(e,t){return Number(e.option_id)<Number(t.option_id)?-1:1})),t}},{key:"checkDeadlinePassed",value:function(e){var t=new Date,a=new Date(e[0].deadline);e[0].isDeadlinePass=a<=t}},{key:"checkUserVoted",value:function(e){for(var t=0;t<e.length;t++)for(var a=e[t].option_user_id.split("|"),n=0;n<a.length;n++)if(a[n]===this.state.user.sid)return!0;return!1}},{key:"sortSimpollList",value:function(e){return"audience"===this.state.viewmode?e.sort((function(e,t){var a=e.voted||e.isDeadlinePass,n=t.voted||t.isDeadlinePass;return!a&&n?-1:a&&!n||Number(e.sid)<Number(t.sid)?1:-1})):e.sort((function(e,t){return!e.isDeadlinePass&&t.isDeadlinePass?-1:e.isDeadlinePass&&!t.isDeadlinePass||Number(e.sid)<Number(t.sid)?1:-1})),e}},{key:"render",value:function(){var e=null;return e="audience"==this.state.viewmode?i.a.createElement(Q,{"room-list-data":this.state.roomList,onRoomClick:this.getSimpollList,"simpoll-list-data":this.state.simpollList,onSimpollSubmit:this.submitSimpoll,onUpdateChoice:this.updateChoice,onSimpollRefresh:this.getSimpoll}):i.a.createElement(F,{"room-list-data":this.state.roomList,onRoomClick:this.getSimpollList,"simpoll-list-data":this.state.simpollList,onSimpollCreate:this.createSimpoll,onRoomCreate:this.createRoom,onSimpollDelete:this.deleteSimpoll,onRoomDelete:this.deleteRoom,onSimpollRefresh:this.getSimpoll,currentRoomId:this.state.currentRoomId}),i.a.createElement(h.a,{className:"p-0"},i.a.createElement(E,{user:this.state.user,href:"/index.php/home"},"Simpoll"),i.a.createElement(d.a,{className:"m-2"},i.a.createElement(b.a,{xs:12,md:6,className:"p-1"},i.a.createElement(g,{data:this.alertList})),i.a.createElement(b.a,{xs:12,md:6,className:"p-1"},i.a.createElement(O,{onSubmit:this.search,data:this.state.searchResult,addRoom:this.participateRoom}))),i.a.createElement($,{viewmode:this.state.viewmode,onViewModeChange:this.changeViewMode}),i.a.createElement(d.a,{className:"m-2"},e))}}]),t}(i.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(z,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},63:function(e,t,a){},84:function(e,t,a){},97:function(e,t,a){e.exports=a(202)}},[[97,1,2]]]);
//# sourceMappingURL=main.ba78102c.chunk.js.map